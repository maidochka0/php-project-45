#!/usr/bin/env php
<?php

$autoloadPath1 = __DIR__ . '/../../../autoload.php';
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';
if (file_exists($autoloadPath1)) {
    require_once $autoloadPath1;
} else {
    require_once $autoloadPath2;
}

\Project1\Engine\welcome();
$userName = \Project1\Cli\userName();
echo "What number is missing in the progression?\n";
$countTrueAns = 0;
$ansLimit = 3;
$lenList = 5;
while ($countTrueAns < $ansLimit) {
    $step = rand(1,10);
    $list =[rand(0,10)];
    for ($i = 1, $next = $list[0] + $step; $i < $lenList; $i++) {
        $list[] = $next;
        $next += $step;
    }
    $ansIndex = rand(0,4);
    $questAns = $list[$ansIndex];
    $hidden = '..';
    $list[$ansIndex] = $hidden;
    echo "Question:";
    foreach ($list as $i) {
        echo " {$i}";
    }
    echo "\n";
    $countTrueAns = \Project1\Engine\checkAns($userName, $questAns) ? $countTrueAns + 1 : 0;
}
echo "Congratulations, {$userName}!\n";